#!/usr/bin/env python3

from subprocess import PIPE, Popen, call
from sys import argv

apps = [('Compton', '~/.config/compton.conf'),
        ('Neovim', '~/.config/nvim/init.vim'),
        ('Neovim Keymaps', '~/.config/nvim/keymaps.vim'),
        ('Neovim Plugins', '~/.config/nvim/plugins.vim'),
        ('Polybar', '~/.config/polybar/config'),
        ('Qtile', '~/.config/qtile/config.py'),
        ('SSH', '~/.ssh/config'),
        ('Tmux', '~/.tmux.conf'),
        ('XMonad', '~/.config/xmonad/xmonad.hs'),
        ('Xresources', '~/.Xresources'),
        ('Zsh', '~/.zshrc'),
        ]

# ends with \n for interaction with dmenu command
file_names = [ a + '\n' for a, _ in apps ]
file_table = { a + '\n' : b for a, b in apps }

proc = Popen(['dmenu', '-p', 'Config:'] + argv[1:], stdin=PIPE, stdout=PIPE)
result, _ = proc.communicate(''.join(file_names).encode('UTF-8'))
result = result.decode('UTF-8')

if result != '\n':
    fn = file_table[result]
    call(['tmux_run', '-t', 'alacritty', '$EDITOR ' + fn])

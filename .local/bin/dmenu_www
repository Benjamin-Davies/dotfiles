#!/usr/bin/env python3

from subprocess import PIPE, Popen, call
from sys import argv

apps = [('Bible', 'https://my.bible.com/bible/'),
        ('Calendar', 'https://calendar.google.com/calendar/r'),
        ('Classroom', 'https://classroom.google.com/u/1/h'),
        ('Contacts', 'https://contacts.google.com/'),
        ('Discord', 'https://discordapp.com/app'),
        ('DreamCatcher', 'https://app.dreamcatcher.school.nz/'),
        ('Education Perfect (EP)', 'https://educationperfect.com/app/'),
        ('Facebook', 'https://facebook.com/'),
        ('Messenger', 'https://messenger.com/'),
        ('GitHub', 'https://github.com/'),
        ('GitLab', 'https://gitlab.com/'),
        ('Gmail', 'https://mail.google.com/mail/ca/u/0/'),
        ('Gmail School', 'https://mail.google.com/mail/ca/u/1/'),
        ('Google Drive', 'https://drive.google.com/drive/u/0/'),
        ('Google Drive School', 'https://drive.google.com/drive/u/1/'),
        ('MMC Moodle', 'https://moodle.mmc.school.nz/login/index.php'),
        ('NeverSSL', 'http://neverssl.com/'),
        ('Planning Center Services', 'https://planningcenteronline.com/dashboard/0'),
        ('Pushbullet', 'https://pushbullet.com/'),
        ('Skype', 'https://web.skype.com/'),
        ('Spotify', 'https://open.spotify.com/'),
        ('WhatsApp', 'https://web.whatsapp.com/'),
        ('YouTube', 'https://youtube.com/'),
        ]

# ends with \n for interaction with dmenu command
file_names = [ a + '\n' for a, _ in apps ]
file_table = { a + '\n' : b for a, b in apps }

proc = Popen(['dmenu', '-p', 'www'] + argv[1:], stdin=PIPE, stdout=PIPE)
result, _ = proc.communicate(''.join(file_names).encode('UTF-8'))
result = result.decode('UTF-8')

if result != '\n':
    fn = file_table[result]
    call('google-chrome-stable --new-window --profile-directory="Default" --app=' + fn, shell=True)
